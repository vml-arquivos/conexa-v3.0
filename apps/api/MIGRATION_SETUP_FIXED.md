# Migration Setup - Normalizado

## Patch/Diff

### Arquivos Criados

**1. `prisma/migrations/migration_lock.toml`**

```toml
# Please do not edit this file manually
# It should be added in your version-control system (i.e. Git)
provider = "postgresql"
```

**2. `prisma/migrations/20260203000000_initial_setup/migration.sql`**

Arquivo SQL gerado via `prisma migrate diff` contendo todo o schema inicial.

### Arquivos Alterados

**3. `README.md` (seção 10)**

```diff
-### 1. Configurar `DATABASE_URL`
-
-Antes de rodar qualquer comando, você precisa configurar a variável de ambiente `DATABASE_URL` no arquivo `.env`.
-
-O Supabase fornece a URL de conexão direta ao seu banco de dados PostgreSQL. Você pode encontrá-la em:
-
-**Project Settings > Database > Connection string**
-
-Copie a URL que se parece com isto:
-
-```bash
-postgresql://postgres:[YOUR-PASSWORD]@[YOUR-HOST]:5432/postgres
-```
-
-E cole no seu arquivo `.env`:
-
-```bash
-# .env
-DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@[YOUR-HOST]:5432/postgres"
-```
+### 1. Configurar `DATABASE_URL`
+
+Crie um arquivo `.env` na raiz do projeto e adicione a variável de ambiente `DATABASE_URL`.
+
+O Supabase fornece a URL de conexão direta ao seu banco de dados PostgreSQL. Você pode encontrá-la em:
+
+**Project Settings > Database > Connection string**
+
+Copie a URL e cole no seu arquivo `.env`:
+
+```bash
+# .env
+DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@[YOUR-HOST]:5432/postgres"
+```
+
+**⚠️ IMPORTANTE:** Nunca comite o arquivo `.env` no Git. Use variáveis de ambiente no seu ambiente de produção.

 ### 2. Comandos de Migração

-Os seguintes scripts foram adicionados ao `package.json` para facilitar o gerenciamento das migrações:
-
 | Comando | Descrição |
 |:---|:---|
+| `npx prisma validate` | Valida a sintaxe do seu `schema.prisma` |
 | `npm run prisma:generate` | Gera o Prisma Client com base no schema atual |
 | `npm run db:migrate:dev` | Cria uma nova migração em ambiente de desenvolvimento |
 | `npm run db:migrate:deploy` | Aplica todas as migrações pendentes em ambiente de produção |
-| `npm run db:studio` | Abre o Prisma Studio para visualizar e editar dados |
+| `npx prisma migrate status` | Verifica o status das migrações no banco de dados |

 ### 3. Checklist de Deploy

 Para aplicar as migrações em um ambiente de produção (como o Supabase), siga estes passos:

-**Passo 1: Gerar o Prisma Client**
+**Passo 1: Validar o Schema**

-Sempre gere o cliente para garantir que ele esteja sincronizado com o schema.
+```bash
+npx prisma validate
+```

-```bash
-npm run prisma:generate
-```
+**Passo 2: Gerar o Prisma Client**

-**Passo 2: Aplicar as Migrações**
+```bash
+npm run prisma:generate
+```

-Este comando aplica todas as migrações pendentes da pasta `prisma/migrations/`.
+**Passo 3: Aplicar as Migrações**

 ```bash
 npm run db:migrate:deploy
 ```

+**Passo 4: Verificar o Status**
+
+```bash
+npx prisma migrate status
+```
+
+**Exemplo de saída esperada:**
+
+```
+Database schema is up to date!
+
+1 migration found in prisma/migrations
+
+- 20260203000000_initial_setup
+```
+
 **⚠️ IMPORTANTE:**

 - **NUNCA** use `npm run db:migrate:dev` em produção. Este comando pode resetar o banco de dados.
 - Use `npm run db:migrate:deploy` para aplicar migrações de forma segura.
```

---

## Comandos Executáveis

```bash
# Validar schema
npx prisma validate

# Gerar Prisma Client
npm run prisma:generate

# Aplicar migrações (produção)
npm run db:migrate:deploy

# Verificar status
npx prisma migrate status
```
